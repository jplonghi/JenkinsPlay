pipeline {
	agent any
	environment {
        dockerImageName = "docker.slc.crengland.com/cre/myservice"
    }
	stages{
		stage('Clone repository') {
			steps{
                checkout scm
			}
		}
        stage('DEV'){
			when{
				branch 'feature/*'
			}
			steps{
				bat "echo Build For DEV ${dockerImageName}"
				bat "echo Build in DEV"
			}
		}
		stage('QA'){
			when{
				branch 'QA-SNAPSHOT'
			}
			
					steps{
						bat "echo Build For QA ${env.BRANCH_NAME}"
						bat "echo Build in QA"
					}
		}
		stage('PROD'){
			when{
				branch 'master'
			}
			environment { 
                image = "${dockerImageName}:1.0-prod" 
            }
			steps{
				bat "echo Build For Prod ${image}"
				bat "echo Build in PROD"
			}
		}	
    }

}